apiVersion: apps/v1
kind: Deployment
metadata:
  name: pomerium
spec:
  template:
    spec:
      containers:
        - name: pomerium
          imagePullPolicy: IfNotPresent
          image: ghcr.io/glueops/ingress-controller-2:sha-fd28bb1@sha256:c1493c2f2c5ace5a85c2ceb79afb90188cb32fbfc9c794f193945069ae6feb1b
          imagePullSecrets:
            - name: dockerconfigjson-github-com
          resources:
            limits:
              cpu: 5
              memory: 4Gi
            requests:
              cpu: 300m
              memory: 200Mi
      nodeSelector:
        glueops.dev/role: "glueops-platform"
      tolerations:
        - key: "glueops.dev/role"
          operator: "Equal"
          value: "glueops-platform"
          effect: "NoSchedule" 
